<app-not-found *ngIf="isNotFoundPage; else pageInfo"></app-not-found>
<ng-template #pageInfo>
  <app-breadcrumbs></app-breadcrumbs>
  <div *ngIf="advert && !isNotFoundPage" class="card-info">
    <div class="card-info__left">
      <h3>{{advert.name}}</h3>
      <div class="card-info__imgs"
        [ngClass]="{'br-base': imagesLink.length <= 0, 'bg-color-white-dark': imagesLink.length <= 0}">
        <img *ngIf="imagesLink.length > 0; else noImg" class="card-info__img" [src]="imagesLink[index]"
          [alt]="advert.name" />
        <span class="card-info__bg" [ngStyle]="{'background-image': bgImg}"></span>
        <!-- <img *ngIf="imagesLink.length > 0; else noImg" class="card-info__bg" [src]="imagesLink[index]" [alt]="advert.name" /> -->
        <ng-template #noImg>
          <app-no-image></app-no-image>
        </ng-template>
      </div>
      <ul class="card-info__gallery">
        <li *ngFor="let img of imagesLinkBg; let i = index" class="card-info__gallery-item pointer"
          [ngClass]="{'active': i === index}" (click)="onChangeActiveImg(i)">
          <div class="card-info__img-gallery" [ngStyle]="{'background-image': img}">
            <!-- <img [src]="img" [alt]="advert.name" /> -->
          </div>
        </li>
      </ul>
    </div>
    <div class="card-info__right">
      <div class="card-info__header">
        <h3>{{advert.cost | customCurrency: " ₽"}}</h3>
        <button class="btn btn-img btn-phone mt-16" (click)="onShowPhone()">
          <svg class="mr-12" width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M6.39459 2.32403C6.29128 2.19113 6.16088 2.08174 6.01205 2.00312C5.86321 1.9245 5.69935 1.87844 5.53135 1.86802C5.36335 1.85759 5.19505 1.88303 5.03764 1.94264C4.88022 2.00225 4.73729 2.09468 4.61834 2.21378L2.80884 4.02503C1.96359 4.87203 1.65209 6.07078 2.02134 7.12253C3.55389 11.4758 6.04686 15.4282 9.31534 18.6865C12.5737 21.955 16.5261 24.4479 20.8793 25.9805C21.9311 26.3498 23.1298 26.0383 23.9768 25.193L25.7863 23.3835C25.9054 23.2646 25.9979 23.1216 26.0575 22.9642C26.1171 22.8068 26.1425 22.6385 26.1321 22.4705C26.1217 22.3025 26.0756 22.1387 25.997 21.9898C25.9184 21.841 25.809 21.7106 25.6761 21.6073L21.6388 18.4678C21.4969 18.3577 21.3317 18.2812 21.1559 18.2442C20.9801 18.2073 20.7981 18.2107 20.6238 18.2543L16.7913 19.2115C16.2798 19.3394 15.7438 19.3326 15.2357 19.1918C14.7275 19.0511 14.2645 18.7811 13.8916 18.4083L9.59359 14.1085C9.22044 13.7358 8.95016 13.2729 8.80909 12.7647C8.66802 12.2565 8.66095 11.7205 8.78859 11.2088L9.74759 7.37628C9.79118 7.20197 9.79461 7.02004 9.75763 6.84421C9.72064 6.66839 9.64421 6.50325 9.53409 6.36128L6.39459 2.32403ZM3.29709 0.894278C3.60333 0.58794 3.97124 0.350256 4.37639 0.19701C4.78153 0.0437641 5.21464 -0.0215377 5.64696 0.00544078C6.07928 0.0324193 6.50091 0.151061 6.88386 0.353487C7.26681 0.555914 7.60231 0.837493 7.86809 1.17953L11.0076 5.21503C11.5833 5.95528 11.7863 6.91953 11.5588 7.82953L10.6016 11.662C10.5521 11.8605 10.5548 12.0685 10.6094 12.2656C10.6639 12.4628 10.7686 12.6425 10.9131 12.7873L15.2128 17.087C15.3578 17.2318 15.5378 17.3367 15.7353 17.3912C15.9328 17.4458 16.1411 17.4483 16.3398 17.3985L20.1706 16.4413C20.6197 16.329 21.0884 16.3203 21.5413 16.4158C21.9943 16.5113 22.4196 16.7085 22.7851 16.9925L26.8206 20.132C28.2713 21.2608 28.4043 23.4045 27.1058 24.7013L25.2963 26.5108C24.0013 27.8058 22.0658 28.3745 20.2616 27.7393C15.6437 26.1144 11.4508 23.4707 7.99409 20.0043C4.52785 16.5481 1.88416 12.3558 0.259092 7.73853C-0.374408 5.93603 0.194342 3.99878 1.48934 2.70378L3.29884 0.894278H3.29709Z"
              fill="white" />
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M21.875 1.75C22.1071 1.75 22.3296 1.84219 22.4937 2.00628C22.6578 2.17038 22.75 2.39294 22.75 2.625V5.25H25.375C25.6071 5.25 25.8296 5.34219 25.9937 5.50628C26.1578 5.67038 26.25 5.89294 26.25 6.125C26.25 6.35706 26.1578 6.57962 25.9937 6.74372C25.8296 6.90781 25.6071 7 25.375 7H22.75V9.625C22.75 9.85706 22.6578 10.0796 22.4937 10.2437C22.3296 10.4078 22.1071 10.5 21.875 10.5C21.6429 10.5 21.4204 10.4078 21.2563 10.2437C21.0922 10.0796 21 9.85706 21 9.625V7H18.375C18.1429 7 17.9204 6.90781 17.7563 6.74372C17.5922 6.57962 17.5 6.35706 17.5 6.125C17.5 5.89294 17.5922 5.67038 17.7563 5.50628C17.9204 5.34219 18.1429 5.25 18.375 5.25H21V2.625C21 2.39294 21.0922 2.17038 21.2563 2.00628C21.4204 1.84219 21.6429 1.75 21.875 1.75Z"
              fill="white" />
          </svg>
          Показать номер телефона
        </button>
      </div>
      <div class="card-info__body">
        <h4>Адрес</h4>
        <p class="mt-8">{{advert.location}}</p>
        <!-- <a class="link icon icon-right icon-arrow-top-right mt-4"> -->
        <!-- <a class="d-flex content-start link mt-4"> -->
        <a [href]="map" target="_blank" class="d-flex content-start link mt-4">
          Открыть на карте
          <svg class="ml-8" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M18.75 2.5C18.75 2.16848 18.6183 1.85054 18.3839 1.61612C18.1495 1.3817 17.8315 1.25 17.5 1.25H2.5C2.16848 1.25 1.85054 1.3817 1.61612 1.61612C1.3817 1.85054 1.25 2.16848 1.25 2.5V17.5C1.25 17.8315 1.3817 18.1495 1.61612 18.3839C1.85054 18.6183 2.16848 18.75 2.5 18.75H17.5C17.8315 18.75 18.1495 18.6183 18.3839 18.3839C18.6183 18.1495 18.75 17.8315 18.75 17.5V2.5ZM0 2.5C0 1.83696 0.263392 1.20107 0.732233 0.732233C1.20107 0.263392 1.83696 0 2.5 0L17.5 0C18.163 0 18.7989 0.263392 19.2678 0.732233C19.7366 1.20107 20 1.83696 20 2.5V17.5C20 18.163 19.7366 18.7989 19.2678 19.2678C18.7989 19.7366 18.163 20 17.5 20H2.5C1.83696 20 1.20107 19.7366 0.732233 19.2678C0.263392 18.7989 0 18.163 0 17.5V2.5ZM7.3175 13.5038C7.20031 13.6211 7.04129 13.6871 6.87544 13.6872C6.70959 13.6873 6.55048 13.6216 6.43313 13.5044C6.31577 13.3872 6.24977 13.2282 6.24965 13.0623C6.24954 12.8965 6.31531 12.7374 6.4325 12.62L11.5538 7.5H8.09375C7.92799 7.5 7.76902 7.43415 7.65181 7.31694C7.5346 7.19973 7.46875 7.04076 7.46875 6.875C7.46875 6.70924 7.5346 6.55027 7.65181 6.43306C7.76902 6.31585 7.92799 6.25 8.09375 6.25H13.0625C13.2283 6.25 13.3872 6.31585 13.5044 6.43306C13.6217 6.55027 13.6875 6.70924 13.6875 6.875V11.8438C13.6875 12.0095 13.6217 12.1685 13.5044 12.2857C13.3872 12.4029 13.2283 12.4688 13.0625 12.4688C12.8967 12.4688 12.7378 12.4029 12.6206 12.2857C12.5033 12.1685 12.4375 12.0095 12.4375 11.8438V8.38375L7.3175 13.5038Z"
              fill="#3B82F6" />
          </svg>
        </a>
      </div>
      <div class="card-info__description">
        <h4>Описание</h4>
        <p class="mt-8">{{advert.description}}</p>
      </div>
    </div>
  </div>
</ng-template>
<ng-template *ngIf="!advert && !isNotFoundPage">
  <app-loading></app-loading>
</ng-template>
<app-show-phone *ngIf="advert" [phoneProps]="advert.phone" [userNameProps]="advert.user.name"></app-show-phone>
<!-- <iframe
  src="https://yandex.com/map-widget/v1/?um=constructor%3A5fa315f106b64866f10e0f7e3c3c4f1f6ef3654a53f514c1deb41f3838fb3bb8&amp;source=constructor"
  width="100%" height="240" frameborder="0"></iframe> -->
